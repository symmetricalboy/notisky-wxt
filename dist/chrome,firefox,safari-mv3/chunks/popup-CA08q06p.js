import{r as c,j as s,b as n,a as h,R as x}from"./browser-Bh6BCD6u.js";function j(){const[t,u]=c.useState({notification:0,message:0,total:0}),[m,r]=c.useState(!0);c.useEffect(()=>{(async()=>{try{r(!0);const e=(await n.tabs.query({active:!0,currentWindow:!0}))[0];if(e!=null&&e.url&&(e.url.includes("bsky.app")||e.url.includes("bsky.social"))){const g=await n.tabs.sendMessage(e.id,{action:"checkForUpdates"});console.log("Response from content script:",g)}const d=await n.storage.local.get("notificationCounts");d.notificationCounts&&u(d.notificationCounts)}catch(l){console.error("Error fetching notification counts:",l)}finally{r(!1)}})()},[]);const a=o=>{n.tabs.create({url:`https://bsky.app${o}`}),window.close()},p=()=>{n.runtime.openOptionsPage(),window.close()},i=o=>o>99?"badge-counter large-number":"badge-counter";return s.jsxs("div",{className:"popup-container",children:[s.jsxs("div",{className:"popup-header",children:[s.jsx("img",{src:"/icon/48.png",alt:"Notisky Logo",className:"logo"}),s.jsx("h1",{children:"Notisky"})]}),m?s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"Checking for notifications..."})]}):s.jsxs("div",{className:"notification-summary",children:[s.jsxs("div",{className:"count-container",children:[s.jsxs("div",{className:"count-item badge-container",onClick:()=>a("/notifications"),children:[s.jsx("div",{className:"count-label",children:"Notifications"}),t.notification>0&&s.jsx("div",{className:i(t.notification),children:t.notification>99?"99+":t.notification})]}),s.jsxs("div",{className:"count-item badge-container",onClick:()=>a("/messages"),children:[s.jsx("div",{className:"count-label",children:"Messages"}),t.message>0&&s.jsx("div",{className:i(t.message),children:t.message>99?"99+":t.message})]})]}),s.jsxs("div",{className:"total-count badge-container",children:[s.jsx("span",{children:"Total:"}),t.total>0&&s.jsx("div",{className:i(t.total),children:t.total>99?"99+":t.total})]})]}),s.jsxs("div",{className:"popup-actions",children:[s.jsx("button",{className:"action-button primary",onClick:()=>a("/"),children:"Open Bluesky"}),s.jsx("button",{className:"action-button secondary",onClick:p,children:"Options"})]})]})}h.createRoot(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(j,{})}));
