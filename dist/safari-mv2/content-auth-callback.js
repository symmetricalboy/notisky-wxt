var contentAuthCallback=function(){"use strict";console.log("Notisky auth callback content script loaded"),typeof window<"u"&&typeof document<"u"&&(window.addEventListener("message",function(e){if(e.origin.includes("notisky.symm.app")&&(console.log("Received message from auth server page:",e.data),e.data&&e.data.source==="notisky-auth")){console.log("Processing auth callback from window.postMessage");const{code:s,state:r}=e.data;s&&r&&chrome.runtime.sendMessage({type:"oauth_callback",code:s,state:r}).then(o=>{console.log("Auth callback processed by background script:",o),window.postMessage({source:"notisky-extension",success:!0},"*")}).catch(o=>{console.error("Error processing auth callback:",o),window.postMessage({source:"notisky-extension",success:!1,error:o.message},"*")})}}),document.addEventListener("DOMContentLoaded",()=>{try{const e=new URLSearchParams(window.location.search),s=e.get("code"),r=e.get("state"),o=e.get("error");o?console.error("Auth error:",o):s&&r&&(console.log("Auth code received in URL params, processing..."),chrome.runtime.sendMessage({type:"oauth_callback",code:s,state:r}).then(c=>{console.log("Auth callback processed by background script:",c)}).catch(c=>{console.error("Error processing auth callback:",c)}))}catch(e){console.error("Error in auth callback script:",e)}}));const n={};function i(){}function t(e,...s){}const a={debug:(...e)=>t(console.debug,...e),log:(...e)=>t(console.log,...e),warn:(...e)=>t(console.warn,...e),error:(...e)=>t(console.error,...e)};return(async()=>{try{return await n.main()}catch(e){throw a.error('The unlisted script "content-auth-callback" crashed on startup!',e),e}})()}();
contentAuthCallback;
